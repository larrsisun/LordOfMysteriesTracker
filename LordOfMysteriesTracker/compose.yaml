#version: '3.8'
#services:
#  # Ваш существующий RabbitMQ (я добавил labels и volumes для надежности)
#  rabbitmq:
#    image: 'rabbitmq:3-management-alpine' # -alpine легче, management дает веб-интерфейс
#    container_name: tracker-rabbitmq
#    environment:
#      - 'RABBITMQ_DEFAULT_USER=myuser'
#      - 'RABBITMQ_DEFAULT_PASS=secret'
#    ports:
#      - '5672:5672'   # AMQP (для приложения) - теперь явно прокидываем
#      - '15672:15672' # Веб-интерфейс (добавил, очень удобно для отладки)
#    volumes:
#      - rabbitmq-data:/var/lib/rabbitmq
#    healthcheck:
#      test: ["CMD", "rabbitmq-diagnostics", "ping"]
#      interval: 30s
#      timeout: 10s
#      retries: 3
#    restart: unless-stopped
#
#  # Новый сервис: MySQL
#  mysql:
#    image: mysql:8
#    container_name: tracker-mysql
#    environment:
#      MYSQL_ROOT_PASSWORD: rootpassword
#      MYSQL_DATABASE: tracker_db
#      MYSQL_USER: app_user
#      MYSQL_PASSWORD: app_password
#    ports:
#      - "3306:3306"
#    volumes:
#      - mysql-data:/var/lib/mysql
#    command:
#      --default-authentication-plugin=mysql_native_password
#      --character-set-server=utf8mb4
#      --collation-server=utf8mb4_unicode_ci
#    restart: unless-stopped
#
#  # Новый сервис: Redis
#  redis:
#    image: redis:7-alpine
#    container_name: tracker-redis
#    ports:
#      - "6379:6379"
#    volumes:
#      - redis-data:/data
#    command: redis-server --appendonly yes
#    restart: unless-stopped
#
## Объявляем все volumes в одном месте
#volumes:
#  rabbitmq-data:
#  mysql-data:
#  redis-data:
